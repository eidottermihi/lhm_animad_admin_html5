<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="animad-keeper/animad-keeper-create-form.html">
<link rel="import" href="animad-keeper/animad-keeper-update-form.html">
<link rel="import" href="animad-keeper/animad-keepers-list.html">
<link rel="import" href="animad-icons.html">

<link rel="import" href="shared-styles.html">


<!-- GENERATOR pattern: [DOMAINNAME]-[ENTITYNAME]-view -->
<dom-module id="animad-keepers-view">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }

      .animad-keeper-view-content {
        display: grid;
        grid-row-gap: 3em;
      }
    </style>

    <app-route route="{{route}}" pattern="/:page" data="{{routeData}}" tail="{{subroute}}">
    </app-route>


      <div class="card">
        <div class="circle"><iron-icon icon="animad-icons:basecamp"></iron-icon></div>
        <h1>Keepers view</h1>
        <div class="animad-keeper-view-content">
          <iron-pages selected="[[page]]" attr-for-selected="name" fallback-selection="view404" route="{{subroute}}">
              <animad-keepers-list name=""
                url="[[backendUrl]]/api/admin_service/keepers"
                default-search='vorname:hans nachname:dampf'
                route="{{subroute}}"
                edit-path="/keepers-view/edit"
                create-path="/keepers-view/create">
              </animad-keepers-list>
              <animad-keeper-create-form name="create" 
                save-url="[[backendUrl]]/api/admin_service/keepers"
                profile-url="[[backendUrl]]/api/admin_service/profile/keepers"
                save-path="/keepers-view/"
                cancel-path="/keepers-view/">
              </animad-keeper-create-form>
              <animad-keeper-update-form name="edit" load-url="[[backendUrl]]/api/admin_service/keepers{{subroute.path}}"
                 profile-url="[[backendUrl]]/api/admin_service/profile/keepers"
                 save-path="/keepers-view/"
                 cancel-path="/keepers-view/"></animad-keeper-update-form>
              <animad-keepers-list name="filterexample" url="[[backendUrl]]/api/admin_service/keepers" load-complete-data="true"></animad-keepers-list>
          </iron-pages>
        </div>
      </div>

  </template>

  <script>
    // GENERATOR pattern (camel case): [DOMAINNAME][ENTITYNAME]View
    class AnimadKeepersView extends Polymer.Element {
      // GENERATOR pattern: [DOMAINNAME]-[ENTITYNAME]-view
      static get is() { return 'animad-keepers-view'; }

      static get properties() {
          return {
              route: {
                  type: String,
                  reflectToAttribute: true
              },
              page: {
                  type: String,
                  reflectToAttribute: true
              },
              routeData: Object,
              subroute: String,
              // This shouldn't be neccessary, but the Analyzer isn't picking up
              // Polymer.Element#rootPath
              rootPath: String,
              backendUrl: {
                  type: String
              }
          }

        }
            
        static get observers() {
            return [
                '_routePageChanged(routeData.page)',
            ];
        }
        _routePageChanged(page) {
            this.page = page || '';
        }
    }

    // GENERATOR pattern (camel case): [DOMAINNAME][ENTITYNAME]View
    window.customElements.define(AnimadKeepersView.is, AnimadKeepersView);
  </script>
</dom-module>
